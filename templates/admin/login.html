<!DOCTYPE html>
<html>
  <head>
    <title>Admin Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="style.css" rel="stylesheet" />
  </head>
  <body
    class="d-flex align-items-center justify-content-center"
    style="height: 100vh"
  >
    <div class="card p-4 shadow" style="width: 360px">
      <h4 class="text-center mb-3">Admin Login</h4>
      <input id="phone" class="form-control mb-2" placeholder="Phone" />
      <input
        id="password"
        type="password"
        class="form-control mb-3"
        placeholder="Password"
      />
      <button class="btn btn-primary w-100" onclick="login()">Login</button>
    </div>
    <script>
      async function login() {
        const r = await fetch(
          "https://cpu-system-possess-sign.trycloudflare.com/auth/login-password",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              phone: phone.value,
              password: password.value,
            }),
          }
        );

        const d = await r.json();

        if (d.access_token) {
          // Save token in localStorage
          localStorage.setItem("token", d.access_token);
          // Redirect
          window.location.href = "/admin/dashboard";
        } else {
          alert("Login failed");
        }
      }
    </script>

    <!-- <script>
      async function login() {
        const r = await fetch(
          "https://waltraud-unmalleable-fecklessly.ngrok-free.dev/auth/login-password",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              phone: phone.value,
              password: password.value,
            }),
          }
        );
        const d = await r.json();
        if (d.access_token) {
          // Save token in localStorage
          localStorage.setItem("token", d.access_token);
          window.location.href = "/admin/dashboard";
        } else {
          alert("Login failed");
        }
      }
    </script> -->
  </body>
</html>
