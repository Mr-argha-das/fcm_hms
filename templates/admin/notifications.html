{% extends "admin/base.html" %}

{% block title %}Notifications{% endblock %}

{% block content %}

<!-- SEND NOTIFICATION -->
<div class="card mb-4">


  <!-- <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">Send Notification</h5>
  </div>


  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Title</label>
      <input type="text" class="form-control" placeholder="Enter notification title">
    </div>

    <div class="col-md-6">
      <label class="form-label">Message</label>
      <textarea class="form-control" rows="2" placeholder="Enter notification message"></textarea>
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button class="btn btn-success w-100">
        üì¢ Send
      </button>
    </div>
  </div> -->

</div>

<!-- NOTIFICATION HISTORY -->
<div class="card">

  <h6 class="mb-3">Recent Notifications</h6>

  <table class="table table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>Title</th>
        <th>Message</th>
        <th>Sent To</th>
        <th>Date</th>
        <th>Status</th>
        <th class="text-center">Actions</th>
      </tr>
    </thead>

    <tbody>
      {% if notifications %}
        {% for n in notifications %}
        <tr>

          <!-- TITLE -->
          <td>{{ n.title }}</td>

          <!-- MESSAGE -->
          <td class="text-muted">
            {{ n.message[:60] }}{% if n.message|length > 60 %}...{% endif %}
          </td>

          <!-- SENT TO -->
          <td>
            <span class="badge bg-info text-dark">
              {{ n.user.role if n.user else "N/A" }}
            </span>
          </td>

          <!-- DATE -->
          <td>
            {{ n.created_at.strftime("%d %b %Y") }}
          </td>

          <!-- STATUS -->
          <td>
            {% if n.is_read %}
              <span class="badge bg-secondary">Read</span>
            {% else %}
              <span class="badge bg-success">Sent</span>
            {% endif %}
          </td>

          <!-- ACTIONS -->
          <td class="text-center">
            <button class="btn btn-sm btn-outline-primary" title="View">
              üëÅÔ∏è
            </button>
          </td>

        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="6" class="text-center text-muted">
            No notifications found
          </td>
        </tr>
      {% endif %}
    </tbody>
  </table>

</div>

{% endblock %}
